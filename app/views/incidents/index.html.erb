<%= render Ui::ShellComponent.new(
  title: "Incidents",
  subtitle: "Classifier-driven incident creation with strict taxonomy"
) do %>

  <div class="rounded-2xl border border-neutral-900 bg-neutral-950/60 px-6 py-6">
    <div class="space-y-3">
      <% @incidents.each do |i| %>
        <div class="rounded-xl border border-neutral-900 px-4 py-4">
          <div class="flex items-start justify-between gap-4">
            <div>
              <div class="text-sm font-semibold"><%= i.title %></div>
              <div class="mt-1 text-xs text-neutral-400">
                <%= i.severity_label %> • <%= i.team_label %> • <%= i.service_label %> • <%= i.status %>
              </div>
            </div>
            <div class="text-xs text-neutral-500"><%= i.created_at %></div>
          </div>

          <% if i.context.present? %>
            <pre class="mt-4 overflow-auto rounded-xl bg-neutral-950/60 p-3 text-xs text-neutral-300 border border-neutral-900"><%= JSON.pretty_generate(i.context) rescue i.context.to_json %></pre>
          <% end %>
        </div>
      <% end %>

      <% if @incidents.empty? %>
        <div class="text-sm text-neutral-500">No incidents recorded yet.</div>
      <% end %>
    </div>
  </div>

<% end %>
